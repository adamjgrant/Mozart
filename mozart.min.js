class Mozart{constructor(t){return this.name=t,Mozart.index[this.name]=this,this.function_methods=[],this.object_methods={priv:[],pub:[]},this}add_function_method(t,e){this.function_methods.push(e),this[t]=e}add_object_method(t,e,o){o?this.object_methods.priv.push([t,e]):(this.object_methods.pub.push([t,e]),this[t]=e)}parse_object(t,e){var o={};for(var r in t)((t,e,o,r)=>{"priv"!=o&&(e[o]=(e=>r.call(this,t,e,o)))})(t,o,r,e);return o}acts(t){var e=this.parse_object(t.priv,(t,e,o)=>{var r=this.scoped_selector();t[o](r,e)});this.add_object_method("act",e,!0),this.add_object_method("acts",e,!0);var o=this.parse_object(t,(t,e,o)=>{var r=this.scoped_selector();t[o](r,e)});this.add_object_method("act",o),this.add_object_method("acts",o)}act(t){return this.acts(t)}routes(t){var e=this.parse_object(t,(t,e,o)=>{var r=JSON.parse(JSON.stringify(t[o]));return r.url=t[o].url.interpolate(e),r.data=e,Object.keys(e).forEach(e=>{t[o].url.match(e)&&delete r.data[e]}),r});this.add_object_method("route",e),this.add_object_method("routes",e)}route(t){return this.routes(t)}config(t){this.add_object_method("config",t)}events(t){this.add_function_method("events",t),this.add_function_method("event",t)}event(t){return this.events(t)}scoped_selector(){var t=t=>{var e=`[data-component~='${this.name}'] ${t}`;if("function"==typeof jQuery)return $(e);var o=document.querySelectorAll(t);return 1==o.length?o[0]:o};return this.object_methods.pub.concat(this.object_methods.priv).forEach(e=>{var o,r;[o,r]=e,t[o]=t[o]||{},Object.keys(r).forEach(e=>{t[o][e]=r[e]})}),t}init(){this.function_methods.forEach(t=>{t(this.scoped_selector())})}}Mozart.index={},Mozart.init=(()=>{for(var t in Mozart.index){Mozart.index[t].init()}}),String.prototype.interpolate=function(t){return this.replace(/#\{(.+?)\}/g,function(e,o){var r=t[o];return"string"==typeof r||"number"==typeof r?r:e})};
